---
- item:
    type: "add"
    title: "Support for custom search parameters has been backported in the JPA server from DSTU3 back to DSTU2. As of this release of HAPI, full support for custom search parameters exists in all supported versions of FHIR."
- item:
    type: "add"
    title: "A new set of methods have been added to <code>IServerOperationInterceptor</code> called <code>resourcePreCreate</code> , <code>resourcePreUpdate</code> , and <code>resourcePreDelete</code> . These methods are called within the database transaction (just as the existing methods were) but are invoked prior to the contents being saved to the database. This can be useful in order to allow interceptors to change payload contents being saved."
- item:
    type: "remove"
    title: "A few redundant and no longer useful methods have been marked as deprecated in <code>IServerInterceptor</code> . If you have implemented custom interceptors you are recommended to migrate to the recommended methods."
- item:
    type: "add"
    title: "A new method has been added to RequestDetails called <code>setRequestContents()</code> which can be used by interceptors to modify the request body before it is parsed by the server."
- item:
    type: "fix"
    title: "Fix a crash in JPA server when performing a recursive <code>_include</code> which doesn't actually find any matches."
- item:
    issue: "796"
    type: "fix"
    title: "When encoding URL parameter values, HAPI FHIR would incorrectly escape a space (\" \") as a plus (\"+\") insetad of as \"%20\" as required by RFC 3986. This affects client calls, as well as URLs generated by the server (e.g. REST HOOK calls). Thanks to James Daily for reporting!"
- item:
    type: "fix"
    title: "Searching in JPA server using a combination of _content and _id parameters failed. Thanks to Jeff Weyer for reporting!"
- item:
    type: "add"
    title: "A new configuration option has been added to DaoConfig which allows newly created resources to be assigned a UUID by the server instead of a sequential ID"
- item:
    type: "fix"
    title: "An unneccesary column called \"MYHASHCODE\" was added to the HFJ_TAG_DEF table in the JPA server schema"
- item:
    type: "fix"
    title: "A few log entries emitted by the JPA server suring every search have been reduced from INFO to DEBUG in order to reduce log noise"
- item:
    issue: "810"
    type: "fix"
    title: "Fix an issue in JPA server where updating a resource sometimes caused date search indexes to be incorrectly deleted. Thanks to Kyle Meadows for the pull request!"
- item:
    issue: "808"
    type: "fix"
    title: "Servers did not return an ETag if the version was provided on a DSTU3/R4 structure in the getMeta() version field instead of in the getIdElement() ID. Thanks to GitHub user @Chrisjobling for reporting!"
- item:
    type: "fix"
    title: "A bug was fixed in the JPA server when performing a validate operation with a mode of DELETE on a server with referential integrity disabled, the validate operation would delete resource reference indexes as though the delete was actually happening, which negatively affected searching for the resource being validated."
- item:
    type: "add"
    title: "The HAPI FHIR Server framework now has initial support for multitenancy. At this time the support is limited to the server framework (not the client, JPA, or JAX-RS frameworks). See Server Documentation for more information."
