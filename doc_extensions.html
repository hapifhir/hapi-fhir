
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2018-05-28
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

	<head>
		<meta charset="UTF-8" />
		<title>Profiles and Extensions - HAPI FHIR</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta name="author" content="James Agnew" />
		<meta http-equiv="content-language" content="en" />

		<link href="https://netdna.bootstrapcdn.com/bootswatch/2.3.2/united/bootstrap.min.css" rel="stylesheet" />
		<link href="./css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />


		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->


		
<script src="syntaxhighlighter/shCore.js" type="text/javascript"></script>
<script src="syntaxhighlighter/shBrushJScript.js" type="text/javascript"></script>
<script src="syntaxhighlighter/shBrushJava.js" type="text/javascript"></script>
<script src="syntaxhighlighter/shBrushBash.js" type="text/javascript"></script>
<script src="syntaxhighlighter/shBrushXml.js" type="text/javascript"></script>
<link rel="stylesheet" href="syntaxhighlighter/shCore.css" type="text/css"/>
<link rel="stylesheet" href="syntaxhighlighter/shThemeDefault.css" type="text/css"/>
<link rel="shortcut icon" href="http://hapifhir.io/favicon.png"/>
<link rel="stylesheet" href="hapi.css" type="text/css"/>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css"/>
	</head>

	<body class="page-doc_extensions project-hapi-fhir" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<a class="brand" href="http://hapifhir.io/"><span class="color-highlight">HAPI</span> FHIR</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li ><a href="https://smilecdr.com/" title="Support" class="externalLink">Support</a></li>
							<li ><a href="download.html"  title="Download"><i class="fa fa-download"></i> Download</a></li>
							<li ><a href="https://github.com/jamesagnew/hapi-fhir/" title="GitHub Project"  class="externalLink"><i class="fa fa-github"></i> GitHub Project</a></li>
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-book"></i>&nbsp;Documentation&nbsp;<b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="docindex.html" title="Documentation Index">Documentation Index</a></li>
									<li ><a href="doc_intro.html" title="Introduction">Introduction</a></li>
									<li ><a href="doc_dstu2.html" title="DSTU3 Support / HL7.org Structures">DSTU3 Support / HL7.org Structures</a></li>
									<li class="dropdown-submenu ">
										<a href="doc_fhirobjects.html" title="The Data Model">The Data Model</a>
										<ul class="dropdown-menu">
											<li ><a href="doc_fhirobjects.html" title="Working with Resources">Working with Resources</a></li>
											<li ><a href="doc_resource_references.html" title="Resource References">Resource References</a></li>
											<li class="active"><a href="" title="Profiles & Extensions">Profiles & Extensions</a></li>
											<li ><a href="doc_tags.html" title="Tags">Tags</a></li>
											<li ><a href="doc_validation.html" title="Validation">Validation</a></li>
											<li ><a href="doc_custom_structures.html" title="Custom Structures">Custom Structures</a></li>
											<li ><a href="doc_converter.html" title="Version Converter">Version Converter</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu ">
										<a href="doc_rest_client.html" title="RESTful Client">RESTful Client</a>
										<ul class="dropdown-menu">
											<li ><a href="doc_rest_client.html" title="Fluent/Generic Client">Fluent/Generic Client</a></li>
											<li ><a href="doc_rest_client_annotation.html" title="Annotation Client">Annotation Client</a></li>
											<li ><a href="doc_rest_client_interceptor.html" title="Interceptors (client)">Interceptors (client)</a></li>
											<li ><a href="doc_rest_client_http_config.html" title="Client Configuration">Client Configuration</a></li>
											<li ><a href="doc_rest_client_examples.html" title="Client Examples">Client Examples</a></li>
											<li ><a href="doc_rest_client_alternate_provider.html" title="JAX-RS Client & Alternate HTTP Providers">JAX-RS Client & Alternate HTTP Providers</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu ">
										<a href="doc_rest_server.html" title="RESTful Server">RESTful Server</a>
										<ul class="dropdown-menu">
											<li ><a href="doc_rest_server.html" title="Using RESTful Server">Using RESTful Server</a></li>
											<li ><a href="doc_rest_operations.html" title="RESTful Operations">RESTful Operations</a></li>
											<li ><a href="doc_narrative.html" title="Narrative Generator">Narrative Generator</a></li>
											<li ><a href="doc_rest_server_interceptor.html" title="Interceptors (server)">Interceptors (server)</a></li>
											<li ><a href="doc_rest_server_security.html" title="Security">Security</a></li>
											<li ><a href="doc_cors.html" title="CORS Support">CORS Support</a></li>
											<li ><a href="doc_server_tester.html" title="Web Testing UI">Web Testing UI</a></li>
											<li ><a href="doc_rest_server_jaxrs.html" title="JAX-RS Support">JAX-RS Support</a></li>
										</ul>
									</li>
									<li ><a href="doc_logging.html" title="Logging">Logging</a></li>
									<li ><a href="doc_rest_etag.html" title="ETags">ETags</a></li>
									<li ><a href="doc_jpa.html" title="JPA/Database Server">JPA/Database Server</a></li>
									<li ><a href="doc_android.html" title="Android Support">Android Support</a></li>
									<li class="dropdown-submenu ">
										<a href="apidocs/index.html" title="JavaDocs">JavaDocs</a>
										<ul class="dropdown-menu">
											<li ><a href="apidocs/index.html" title="Core API">Core API</a></li>
											<li ><a href="apidocs-dstu2/index.html" title="Model API (DSTU2)">Model API (DSTU2)</a></li>
											<li ><a href="apidocs-dstu3/index.html" title="Model API (DSTU3)">Model API (DSTU3)</a></li>
											<li ><a href="apidocs-r4/index.html" title="Model API (R4)">Model API (R4)</a></li>
											<li ><a href="apidocs-jpaserver/index.html" title="JPA Server API">JPA Server API</a></li>
										</ul>
									</li>
									<li ><a href="doc_cli.html" title="Command Line Tool (hapi-fhir-cli)">Command Line Tool (hapi-fhir-cli)</a></li>
									<li ><a href="doc_tinder.html" title="Maven Plugin (hapi-tinder-plugin)">Maven Plugin (hapi-tinder-plugin)</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-support"></i>&nbsp;Get Help&nbsp;<b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="https://github.com/jamesagnew/hapi-fhir/wiki/Getting-Help" title="How to Ask for Help (read this first!)" class="externalLink">How to Ask for Help (read this first!)</a></li>
									<li ><a href="https://groups.google.com/d/forum/hapi-fhir" title="Google Group (Ask Questions)" class="externalLink">Google Group (Ask Questions)</a></li>
									<li ><a href="https://github.com/jamesagnew/hapi-fhir/issues" title="Issue Tracker (Report Bugs/Request Features)" class="externalLink">Issue Tracker (Report Bugs/Request Features)</a></li>
									<li ><a href="https://chat.fhir.org/" title="FHIR.org Chat (Live Chat with FHIR Implementors)" class="externalLink">FHIR.org Chat (Live Chat with FHIR Implementors)</a></li>
									<li ><a href="hapi-fhir-faq.html" title="Frequently Asked Questions (FAQ)">Frequently Asked Questions (FAQ)</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Test Server <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="http://hapi.fhir.org" title="Public Test Server" class="externalLink">Public Test Server</a></li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
		<div>
			<ul class="breadcrumb">
				<li><a href="index.html" title="HAPI FHIR">HAPI FHIR</a></li>
				<li  class="divider">/</li>
			<li><a href="docindex.html" title="Documentation">Documentation</a></li>
			<li  class="divider">/</li>
				<li>Profiles and Extensions</li>
				<li class="publishDate version-date pull-right">Last Published: 2018-05-28</li>
				<li class="divider pull-right">|</li>
				<li class="projectVersion version-date pull-right">Version: 3.5.0-SNAPSHOT</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
<div class="section"> 
 <div class="page-header">
  <h2 id="Undeclared_Extensions">Undeclared Extensions</h2>
 </div> 
 <p class="doc_info_bubble"> Note on FHIR Versions: Because of the differences in the way the structures work between DSTU2 and DSTU3, we have provided two versions of many of the examples on this page. See the <a href="./download.html">download page</a> for more information on FHIR versions. </p> 
 <p> Extensions are a key part of the FHIR specification, providing a standardized way of placing additional data in a resource. </p> 
 <p> The simplest way to interact with extensions (i.e. to add them to resources you are creating, or to read them from resources you are consuming) is to treat them as &quot;undeclared extensions&quot;. Undeclared extensions can be added to any of the built in FHIR resource types that come with HAPI-FHIR. </p> 
 <p> <b>DSTU2</b> </p> 
 <div class="source"> 
  <pre>// Create an example patient
Patient patient = new Patient();
patient.addIdentifier().setUse(IdentifierUseEnum.OFFICIAL).setSystem(&quot;urn:example&quot;).setValue(&quot;7000135&quot;);

// Create an extension
ExtensionDt ext = new ExtensionDt();
ext.setModifier(false);
ext.setUrl(&quot;http://example.com/extensions#someext&quot;);
ext.setValue(new DateTimeDt(&quot;2011-01-02T11:13:15&quot;));

// Add the extension to the resource
patient.addUndeclaredExtension(ext);
</pre> 
 </div> 
 <p> <b>DSTU3</b> </p> 
 <div class="source"> 
  <pre>// Create an example patient
Patient patient = new Patient();
patient.addIdentifier().setUse(IdentifierUse.OFFICIAL).setSystem(&quot;urn:example&quot;).setValue(&quot;7000135&quot;);

// Create an extension
Extension ext = new Extension();
ext.setUrl(&quot;http://example.com/extensions#someext&quot;);
ext.setValue(new DateTimeType(&quot;2011-01-02T11:13:15&quot;));

// Add the extension to the resource
patient.addExtension(ext);
</pre> 
 </div> 
 <p> Undeclared extensions can also be added to datatypes (composite or primitive). </p> 
 <p> <b>DSTU2</b> </p> 
 <div class="source"> 
  <pre>// Continuing the example from above, we will add a name to the patient, and then
// add an extension to part of that name
HumanNameDt name = patient.addName();
name.addFamily().setValue(&quot;Shmoe&quot;);

// Add a new &quot;given name&quot;, which is of type StringDt 
StringDt given = name.addGiven();
given.setValue(&quot;Joe&quot;);

// Create an extension and add it to the StringDt
ExtensionDt givenExt = new ExtensionDt(false, &quot;http://examples.com#moreext&quot;, new StringDt(&quot;Hello&quot;));
given.addUndeclaredExtension(givenExt);
</pre> 
 </div> 
 <p> <b>DSTU3</b> </p> 
 <div class="source"> 
  <pre>// Continuing the example from above, we will add a name to the patient, and then
// add an extension to part of that name
HumanName name = patient.addName();
name.setFamily(&quot;Shmoe&quot;);

// Add a new &quot;given name&quot;, which is of type String 
StringType given = name.addGivenElement();
given.setValue(&quot;Joe&quot;);

// Create an extension and add it to the String
Extension givenExt = new Extension(&quot;http://examples.com#moreext&quot;, new StringType(&quot;Hello&quot;));
given.addExtension(givenExt);
</pre> 
 </div> 
 <div class="section"> 
  <h3 id="Sub-Extensions">Sub-Extensions</h3> 
  <p> Extensions may also have child extensions as their content, instead of a datatype. This is done by adding a child undeclared extension to the parent extension. </p> 
  <p> <b>DSTU2</b> </p> 
  <div class="source"> 
   <pre>Patient patient = new Patient();

// Add an extension (initially with no contents) to the resource 
ExtensionDt parent = new ExtensionDt(false, &quot;http://example.com#parent&quot;);
patient.addUndeclaredExtension(parent);

// Add two extensions as children to the parent extension
ExtensionDt child1 = new ExtensionDt(false, &quot;http://example.com#childOne&quot;, new StringDt(&quot;value1&quot;));
parent.addUndeclaredExtension(child1);

ExtensionDt child2 = new ExtensionDt(false, &quot;http://example.com#childTwo&quot;, new StringDt(&quot;value1&quot;));
parent.addUndeclaredExtension(child2);
</pre> 
  </div> 
  <p> <b>DSTU3</b> </p> 
  <div class="source"> 
   <pre>Patient patient = new Patient();

// Add an extension (initially with no contents) to the resource 
Extension parent = new Extension(&quot;http://example.com#parent&quot;);
patient.addExtension(parent);

// Add two extensions as children to the parent extension
Extension child1 = new Extension(&quot;http://example.com#childOne&quot;, new StringType(&quot;value1&quot;));
parent.addExtension(child1);

Extension child2 = new Extension(&quot;http://example.com#chilwo&quot;, new StringType(&quot;value1&quot;));
parent.addExtension(child2);
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Retrieving_Extension_Values">Retrieving Extension Values</h3> 
  <p> HAPI provides a few ways of accessing extension values in resources which are received from other sources (i.e. downloaded by a client). </p> 
  <p> <b>DSTU2</b> </p> 
  <div class="source"> 
   <pre>// Get all extensions (modifier or not) for a given URL
List&lt;ExtensionDt&gt; resourceExts = patient.getUndeclaredExtensionsByUrl(&quot;http://fooextensions.com#exts&quot;);

// Get all non-modifier extensions regardless of URL
List&lt;ExtensionDt&gt; nonModExts = patient.getUndeclaredExtensions();

//Get all non-modifier extensions regardless of URL
List&lt;ExtensionDt&gt; modExts = patient.getUndeclaredModifierExtensions();
</pre> 
  </div> 
  <p> <b>DSTU3</b> </p> 
  <div class="source"> 
   <pre>// Get all extensions (modifier or not) for a given URL
List&lt;Extension&gt; resourceExts = patient.getExtensionsByUrl(&quot;http://fooextensions.com#exts&quot;);

// Get all non-modifier extensions regardless of URL
List&lt;Extension&gt; nonModExts = patient.getExtension();

//Get all non-modifier extensions regardless of URL
List&lt;Extension&gt; modExts = patient.getModifierExtension();
</pre> 
  </div> 
 </div> 
</div> 
<div class="section"> 
 <h2 id="Custom_Resource_Types">Custom Resource Types</h2> 
 <p> The most elegant way of adding extensions to a resource is through the use of custom fields. The following example shows a custom type which extends the FHIR Patient resource definition through two extensions. </p> 
 <div class="source"> 
  <pre>import java.util.ArrayList;
import java.util.List;

import org.hl7.fhir.dstu3.model.DateTimeType;
import org.hl7.fhir.dstu3.model.Patient;
import org.hl7.fhir.dstu3.model.StringType;

import ca.uhn.fhir.model.api.annotation.Child;
import ca.uhn.fhir.model.api.annotation.Description;
import ca.uhn.fhir.model.api.annotation.Extension;
import ca.uhn.fhir.model.api.annotation.ResourceDef;
import ca.uhn.fhir.util.ElementUtil;

/**
 * Definition class for adding extensions to the built-in
 * Patient resource type.
 * 
 * Note the &quot;profile&quot; attribute below, which indicates the URL/ID of the
 * profile implemented by this resource. You are not required to supply this,
 * but if you do it will be automatically populated in the resource meta
 * tag if the resource is returned by a server.
 */
@ResourceDef(name=&quot;Patient&quot;, profile=&quot;http://example.com/StructureDefinition/mypatient&quot;)
public class MyPatient extends Patient {

   private static final long serialVersionUID = 1L;

   /**
	 * Each extension is defined in a field. Any valid HAPI Data Type
	 * can be used for the field type. Note that the [name=&quot;&quot;] attribute
	 * in the @Child annotation needs to match the name for the bean accessor
	 * and mutator methods.
	 */
	@Child(name=&quot;petName&quot;)	
	@Extension(url=&quot;http://example.com/dontuse#petname&quot;, definedLocally=false, isModifier=false)
	@Description(shortDefinition=&quot;The name of the patient's favourite pet&quot;)
	private StringType myPetName;

	/**
	 * The second example extension uses a List type to provide
	 * repeatable values. Note that a [max=] value has been placed in
	 * the @Child annotation.
	 * 
	 * Note also that this extension is a modifier extension
	 */
	@Child(name=&quot;importantDates&quot;, max=Child.MAX_UNLIMITED)	
	@Extension(url=&quot;http://example.com/dontuse#importantDates&quot;, definedLocally=false, isModifier=true)
	@Description(shortDefinition=&quot;Some dates of note for this patient&quot;)
	private List&lt;DateTimeType&gt; myImportantDates;

	/**
	 * It is important to override the isEmpty() method, adding a check for any
	 * newly added fields. 
	 */
	@Override
	public boolean isEmpty() {
		return super.isEmpty() &amp;&amp; ElementUtil.isEmpty(myPetName, myImportantDates);
	}
	
	/********
	 * Accessors and mutators follow
	 * 
	 * IMPORTANT:
	 * Each extension is required to have an getter/accessor and a stter/mutator. 
	 * You are highly recommended to create getters which create instances if they
	 * do not already exist, since this is how the rest of the HAPI FHIR API works. 
	 ********/
	
	/** Getter for important dates */
	public List&lt;DateTimeType&gt; getImportantDates() {
		if (myImportantDates==null) {
			myImportantDates = new ArrayList&lt;DateTimeType&gt;();
		}
		return myImportantDates;
	}

	/** Getter for pet name */
	public StringType getPetName() {
		if (myPetName == null) {
			myPetName = new StringType();
		}
		return myPetName;
	}

	/** Setter for important dates */
	public void setImportantDates(List&lt;DateTimeType&gt; theImportantDates) {
		myImportantDates = theImportantDates;
	}

	/** Setter for pet name */
	public void setPetName(StringType thePetName) {
		myPetName = thePetName;
	}

}
</pre> 
 </div> 
 <p> Using this custom type is as simple as instantiating the type and working with the new fields. </p> 
 <div class="source"> 
  <pre>MyPatient patient = new MyPatient();
patient.setPetName(new StringDt(&quot;Fido&quot;));
patient.getImportantDates().add(new DateTimeDt(&quot;2010-01-02&quot;));
patient.getImportantDates().add(new DateTimeDt(&quot;2014-01-26T11:11:11&quot;));

patient.addName().addFamily(&quot;Smith&quot;).addGiven(&quot;John&quot;).addGiven(&quot;Quincy&quot;).addSuffix(&quot;Jr&quot;);

IParser p = FhirContext.forDstu2().newXmlParser().setPrettyPrint(true);
String messageString = p.encodeResourceToString(patient);

System.out.println(messageString);
</pre> 
 </div> 
 <p> This example produces the following output: </p> 
 <div class="source"> 
  <pre>&lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;
   &lt;modifierExtension url=&quot;http://example.com/dontuse#importantDates&quot;&gt;
      &lt;valueDateTime value=&quot;2010-01-02&quot;/&gt;
   &lt;/modifierExtension&gt;
   &lt;modifierExtension url=&quot;http://example.com/dontuse#importantDates&quot;&gt;
      &lt;valueDateTime value=&quot;2014-01-26T11:11:11&quot;/&gt;
   &lt;/modifierExtension&gt;
   &lt;extension url=&quot;http://example.com/dontuse#petname&quot;&gt;
      &lt;valueString value=&quot;Fido&quot;/&gt;
   &lt;/extension&gt;
   &lt;name&gt;
      &lt;family value=&quot;Smith&quot;/&gt;
      &lt;given value=&quot;John&quot;/&gt;
      &lt;given value=&quot;Quincy&quot;/&gt;
      &lt;suffix value=&quot;Jr&quot;/&gt;
   &lt;/name&gt;
&lt;/Patient&gt;</pre> 
 </div> 
 <p> Parsing messages using your new custom type is equally simple. These types can also be used as method return types in clients and servers. </p> 
 <div class="source"> 
  <pre>IParser parser = FhirContext.forDstu2().newXmlParser();
MyPatient newPatient = parser.parseResource(MyPatient.class, messageString);
</pre> 
 </div> 
 <div class="section"> 
  <h3 id="Using_Custom_Types_in_a_Client">Using Custom Types in a Client</h3> 
  <p> If you are using a client and wish to use a specific custom structure, you may simply use the custom structure as you would a build in HAPI type. </p> 
  <div class="source"> 
   <pre>// Create an example patient
MyPatient custPatient = new MyPatient();
custPatient.addName().setFamily(&quot;Smith&quot;).addGiven(&quot;John&quot;);
custPatient.setPetName(new StringType(&quot;Rover&quot;)); // populate the extension

// Create the resource like normal
client.create().resource(custPatient).execute();

// You can also read the resource back like normal
custPatient = client.read().resource(MyPatient.class).withId(&quot;123&quot;).execute();
</pre> 
  </div> 
  <p> You may also explicitly use custom types in searches and other operations which return resources. </p> 
  <div class="source"> 
   <pre>// Perform the search using the custom type
Bundle bundle = client
   .search()
   .forResource(MyPatient.class)
   .returnBundle(Bundle.class)
   .execute();

// Entries in the return bundle will use the given type
MyPatient pat0 = (MyPatient) bundle.getEntry().get(0).getResource();
</pre> 
  </div> 
  <p> You can also explicitly declare a preferred response resource custom type. This is useful for some operations that do not otherwise declare their resource types in the method signature. </p> 
  <div class="source"> 
   <pre>//Perform the search using the custom type
bundle = client
   .history()
   .onInstance(new IdType(&quot;Patient/123&quot;))
   .andReturnBundle(Bundle.class)
   .preferResponseType(MyPatient.class)
   .execute();

//Entries in the return bundle will use the given type
MyPatient historyPatient0 = (MyPatient) bundle.getEntry().get(0).getResource();
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Using_Multiple_Custom_Types_in_a_Client">Using Multiple Custom Types in a Client</h3> 
  <p> Sometimes you may not know in advance exactly which type you will be receiving. For example, there are Patient resources which conform to several different profiles on a server and you aren't sure which profile you will get back for a specific read, you can declare the &quot;primary&quot; type for a given profile. </p> 
  <p> This is declared at the FhirContext level, and will apply to any clients created from this context (including clients created before the default was set). </p> 
  <div class="source"> 
   <pre>FhirContext ctx = FhirContext.forDstu3();

// Instruct the context that if it receives a resource which
// claims to conform to the given profile (by URL), it should
// use the MyPatient type to parse this resource
ctx.setDefaultTypeForProfile(&quot;http://example.com/StructureDefinition/mypatient&quot;, MyPatient.class);

// You can declare as many default types as you like
ctx.setDefaultTypeForProfile(&quot;http://foo.com/anotherProfile&quot;, CustomObservation.class);

// Create a client
IGenericClient client = ctx.newRestfulGenericClient(&quot;http://fhirtest.uhn.ca/baseDstu3&quot;);

// You can also read the resource back like normal
Patient patient = client.read().resource(Patient.class).withId(&quot;123&quot;).execute();
if (patient instanceof MyPatient) {
   // If the server supplied a resource which declared to conform
   // to the given profile, MyPatient will have been returned so
   // process it differently..
}

</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Using_Custom_Types_in_a_Server">Using Custom Types in a Server</h3> 
  <p> If you are using a client and wish to use a specific custom structure, you may simply use the custom structure as you would a build in HAPI type. </p> 
  <div class="source"> 
   <pre>// Create an example patient
MyPatient custPatient = new MyPatient();
custPatient.addName().setFamily(&quot;Smith&quot;).addGiven(&quot;John&quot;);
custPatient.setPetName(new StringType(&quot;Rover&quot;)); // populate the extension

// Create the resource like normal
client.create().resource(custPatient).execute();

// You can also read the resource back like normal
custPatient = client.read().resource(MyPatient.class).withId(&quot;123&quot;).execute();
</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Custom_Type_Examples_Composite_Extensions">Custom Type Examples: Composite Extensions</h3> 
  <p> The following example shows a resource containing a composite extension. </p> 
  <div class="source"> 
   <pre>@ResourceDef(name = &quot;Patient&quot;)
public class CustomCompositeExtension extends Patient {

	private static final long serialVersionUID = 1L;

	/**
	 * A custom extension
	 */
	@Child(name = &quot;foo&quot;)
	@Extension(url=&quot;http://acme.org/fooParent&quot;, definedLocally = false, isModifier = false)
	protected FooParentExtension fooParentExtension;

	public FooParentExtension getFooParentExtension() {
		return fooParentExtension;
	}

	@Override
	public boolean isEmpty() {
		return super.isEmpty() &amp;&amp; ElementUtil.isEmpty(fooParentExtension);
	}

	public void setFooParentExtension(FooParentExtension theFooParentExtension) {
		fooParentExtension = theFooParentExtension;
	}

	@Block
	public static class FooParentExtension extends BackboneElement {

		private static final long serialVersionUID = 4522090347756045145L;

		@Child(name = &quot;childA&quot;)
		@Extension(url = &quot;http://acme.org/fooChildA&quot;, definedLocally = false, isModifier = false)
		private StringType myChildA;

		@Child(name = &quot;childB&quot;)
		@Extension(url = &quot;http://acme.org/fooChildB&quot;, definedLocally = false, isModifier = false)
		private StringType myChildB;

		@Override
		public FooParentExtension copy() {
			FooParentExtension copy = new FooParentExtension();
			copy.myChildA = myChildA;
			copy.myChildB = myChildB;
			return copy;
		}

		@Override
		public boolean isEmpty() {
			return super.isEmpty() &amp;&amp; ElementUtil.isEmpty(myChildA, myChildB);
		}

		public StringType getChildA() {
			return myChildA;
		}

		public StringType getChildB() {
			return myChildB;
		}

		public void setChildA(StringType theChildA) {
			myChildA = theChildA;
		}

		public void setChildB(StringType theChildB) {
			myChildB = theChildB;
		}

	}

}
</pre> 
  </div> 
  <p> This could be used to create a resource such as the following: </p> 
  <div class="source"> 
   <pre>&lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;
   &lt;id value=&quot;123&quot;/&gt;
   &lt;extension url=&quot;http://acme.org/fooParent&quot;&gt;
      &lt;extension url=&quot;http://acme.org/fooChildA&quot;&gt;
         &lt;valueString value=&quot;ValueA&quot;/&gt;
      &lt;/extension&gt;
      &lt;extension url=&quot;http://acme.org/fooChildB&quot;&gt;
         &lt;valueString value=&quot;ValueB&quot;/&gt;
      &lt;/extension&gt;
   &lt;/extension&gt;
&lt;/Patient&gt;</pre> 
  </div> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#Undeclared_Extensions" title="Undeclared Extensions">Undeclared Extensions <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Sub-Extensions" title="Sub-Extensions">Sub-Extensions</a>
		<li><a href="#Retrieving_Extension_Values" title="Retrieving Extension Values">Retrieving Extension Values</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li class="dropdown"><a href="#Custom_Resource_Types" title="Custom Resource Types">Custom Resource Types <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Using_Custom_Types_in_a_Client" title="Using Custom Types in a Client">Using Custom Types in a Client</a>
		<li><a href="#Using_Multiple_Custom_Types_in_a_Client" title="Using Multiple Custom Types in a Client">Using Multiple Custom Types in a Client</a>
		<li><a href="#Using_Custom_Types_in_a_Server" title="Using Custom Types in a Server">Using Custom Types in a Server</a>
		<li><a href="#Custom_Type_Examples_Composite_Extensions" title="Custom Type Examples: Composite Extensions">Custom Type Examples: Composite Extensions</a>
				<li class="divider"></li>
			</ul>
		</li>
					</ul>
				</div>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">HAPI FHIR</li>
						<li >
							<a href="index.html" title="Home">Home</a>
						</li>
						<li >
							<a href="download.html"  title="Download"><i class="fa fa-download"></i> Download</a>
						</li>
						<li >
							<a href="changes-report.html" title="Changelog">Changelog</a>
						</li>
						<li >
							<a href="license.html" title="License">License</a>
						</li>
						<li class="nav-header">Test Server</li>
						<li >
							<a href="http://hapi.fhir.org" title="Public Test Server" class="externalLink">Public Test Server</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Using HAPI</li>
						<li >
							<a href="docindex.html" title="Documentation Index">Documentation Index</a>
						</li>
						<li >
							<a href="doc_cli.html" title="Command Line Tool (cli)">Command Line Tool (cli)</a>
						</li>
						<li class="nav-header">Contribute</li>
						<li >
							<a href="hacking_hapi_fhir.html" title="Guide to Hacking HAPI">Guide to Hacking HAPI</a>
						</li>
					</ul>
				</div>
				<div class="span2 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">JavaDocs</li>
						<li >
							<a href="apidocs/index.html" title="Core API">Core API</a>
						</li>
						<li >
							<a href="apidocs-dstu/index.html" title="Model API (DSTU1)">Model API (DSTU1)</a>
						</li>
						<li >
							<a href="apidocs-dstu2/index.html" title="Model API (DSTU2)">Model API (DSTU2)</a>
						</li>
						<li >
							<a href="apidocs-dstu3/index.html" title="Model API (DSTU3)">Model API (DSTU3)</a>
						</li>
						<li >
							<a href="apidocs-jpaserver/index.html" title="JPA Server API">JPA Server API</a>
						</li>
						<li class="nav-header">JXR</li>
						<li >
							<a href="xref-base/index.html" title="Core">Core</a>
						</li>
						<li >
							<a href="xref-jpaserver/index.html" title="JPA Server">JPA Server</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Get Help</li>
						<li >
							<a href="https://github.com/jamesagnew/hapi-fhir/wiki/Getting-Help" title="How to Ask for Help (read this first!)" class="externalLink">How to Ask for Help (read this first!)</a>
						</li>
						<li >
							<a href="https://groups.google.com/d/forum/hapi-fhir" title="Google Group (Ask Questions)" class="externalLink">Google Group (Ask Questions)</a>
						</li>
						<li >
							<a href="https://github.com/jamesagnew/hapi-fhir/issues" title="Issue Tracker (Report Bugs/Request Features)" class="externalLink">Issue Tracker (Report Bugs/Request Features)</a>
						</li>
						<li >
							<a href="https://chat.fhir.org/" title="FHIR.org Chat (Live Chat with FHIR Implementors)" class="externalLink">FHIR.org Chat (Live Chat with FHIR Implementors)</a>
						</li>
						<li >
							<a href="hapi-fhir-faq.html" title="Frequently Asked Questions (FAQ)">Frequently Asked Questions (FAQ)</a>
						</li>
					</ul>
				</div>
				<div class="span3 bottom-description">
					<blockquote>HAPI FHIR is a Java implementation of the HL7 FHIR
				(Fast Healthcare Interoperable Resources) specification.
				This project is open source (licensed under the Apache Software
				License 2.0) and 100% free to use.<br/><br/>
				<a href="https://github.com/jamesagnew/hapi-fhir"><img src="./images/github-logo-mini.png" alt="Hosted on GitHub" border="0"/></a>
				<br/>
				Star us and we will love you!<br />
				<iframe src="https://ghbtns.com/github-btn.html?user=jamesagnew&repo=hapi-fhir&type=star&count=true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe></blockquote>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2014-2018 <a href="http://www.uhn.ca">University Health Network</a>. All Rights Reserved.</p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>

	<script src="./js/reflow-skin.js"></script>

	<script type="text/javascript">
	var elements = document.getElementsByClassName("source");
	for (var i=0; i < elements.length; i++) {
		var pres = elements[i].getElementsByTagName("pre");
		for (var j = 0; j < pres.length; j++) {
			var pre = pres[j];
			if (pre.innerHTML.match(/^\s*\&lt\;/)) {
				pre.className = 'brush: xml';
			} else if (pre.innerHTML.match(/\/\*/)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\/\//)) {
				pre.className = 'brush: java';
			} else if (pre.innerHTML.match(/^\{/)) {
				pre.className = 'brush: jscript';
			} else if (pre.innerHTML.match(/^\#/)) {
				pre.className = 'brush: bash';
			} else if (pre.innerHTML.match(/\&lt\;\//)) {
				pre.className = 'brush: xml';
			} else {
				pre.className = 'brush: java';
			}
		}
	}

	SyntaxHighlighter.all();
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1395874-5', 'auto');
  ga('require', 'displayfeatures');
  ga('require', 'linkid', 'linkid.js');
  ga('send', 'pageview');

</script>
                </body >
</html>