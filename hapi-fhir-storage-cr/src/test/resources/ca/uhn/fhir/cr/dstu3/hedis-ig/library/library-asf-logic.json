{
	"resourceType": "Library",
	"id": "library-asf-logic",
	"text": {
		"status": "generated",
		"div": "<div xmlns=\"http://www.w3.org/1999/xhtml\"><table class=\"grid dict\"><tr><th scope=\"row\"><b>Id: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">asf-fhir</td></tr><tr><th scope=\"row\"><b>Type: </b></th><td style=\"padding-right: 25px;\"><span><br/><span><span style=\"padding-left: 25px;\"><b>system: </b><span>http://hl7.org/fhir/codesystem-library-type.html</span><br/></span><span style=\"padding-left: 25px;\"><b>code: </b><span>logic-library</span></span></span></span></td></tr><tr><th scope=\"row\"><b>Version: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">1.0.0</td></tr><tr><th scope=\"row\"><b>Status: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\">active</td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"1\" scope=\"row\"><b>Related: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>depends-on</span></p><p style=\"margin-bottom: 5px;\"><b>Resource: </b><br/><span><span style=\"padding-left: 25px;\"><b>reference: </b><span>Library/fhirhelpers</span></span></span></p></td></tr><tr style=\"vertical-align: top;\"><th rowspan=\"10\" scope=\"row\"><b>Data Requirements: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Condition</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1339</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Condition</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1074</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Observation</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Observation</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Observation</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Observation</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1437</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Observation</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1437</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Procedure</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1337</span></span></p></div></td></tr><tr style=\"vertical-align: top;\"><td style=\"padding-left: 25px; padding-right: 25px;\"><div xmlns=\"http://www.w3.org/1999/xhtml\"><p style=\"margin-bottom: 5px;\"><b>type: </b><span>Observation</span></p><p style=\"margin-bottom: 5px;\"><b>code filter:</b><br/><span style=\"padding-left: 25px;\"><b>path: </b><span>code</span></span><br/><span style=\"padding-left: 25px;\"><b>valueset: </b><span>http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1337</span></span></p></div></td></tr>  <!-- Filter down to human readable content --><tr style=\"vertical-align: top;\"><th scope=\"row\"><b>Content: </b></th><td style=\"padding-left: 25px; padding-right: 25px;\"><b>type: </b><span>text/cql</span></td></tr><tr><td colspan=\"2\" style=\"padding-left: 25px; padding-right: 25px;\"><pre><code class=\"language-cql\">library ASF_FHIR version '1.0.0'\n\n/*\nUnhealthy Alcohol Use Screening and Follow-up (ASF)\n*/\n\nusing FHIR version '3.0.0'\n\ninclude FHIRHelpers version '3.0.0' called FHIRHelpers\n\n/*\nMeasure Description\nThe percentage of members 18 years of age and older who were screened for\nunhealthy alcohol use using a standardized tool and, if screened\npositive, received appropriate follow-up care. Two rates are reported.\n1. Unhealthy Alcohol Use Screening. The percentage of members who had a\nsystematic screening for unhealthy alcohol use.\n2. Counseling or Other Follow-up. The percentage of members who screened\npositive for unhealthy alcohol use and received brief counseling or\nother follow-up care within 2 months of a positive screening.\n*/\n\ncodesystem \"LOINC\": 'http://loinc.org'\ncodesystem \"CQFramework\": 'http://cqframework.info/codesystem/placeholder'\n\n// Update\n\nvalueset \"Alcohol Counseling and Treatment\": 'http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1437'\nvalueset \"Alcohol Screening\": 'http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1337'\nvalueset \"Alcohol use disorder\": 'http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1339'\nvalueset \"Dementia\": 'http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1074'\n\ncode \"Alcoholic drinks per drinking day - Reported\": '11287-0' from \"LOINC\"\ncode \"AUDIT Total Score (in points)\": '75624-7' from \"LOINC\"\ncode \"AUDIT-C Total Score (in points)\": '75626-2' from \"LOINC\"\n\n/*\nThis library has an explicit parameter which is the product line.\nRecognized normal arguments are {'commercial', 'medicaid', 'medicare'}.\nIf one of these normal arguments is given, the patient will only be\nconsidered to be in the Initial Population if they have an appropriate\ncontinuous enrollment in that kind of medical plan.\nIf instead a null argument is given, their enrollment status will have no\neffect on whether they are considered to be in the Initial Population.\nIf instead some other argument is given (an unrecognized plan type),\nthe patient will unconditionally NOT be in the Initial Population.\n*/\n\nparameter \"Product Line\" String\n\n/*\nThis library has an explicit parameter which is the measurement year.\nWhile the actual parameter's type accepts all intervals, this library\nexpects it will only be given arguments corresponding exactly to one whole\ncalendar year, and it will not behave properly otherwise; 2017 for example:\nInterval[DateTime(2017,1,1,0,0,0,0), DateTime(2018,1,1,0,0,0,0))\n*/\n\nparameter \"Measurement Period\" Interval&lt;DateTime&gt;\n\n/*\nThis library evaluates with respect to exactly 1 candidate patient at a time,\nthat patient being given by the special context parameter Patient.\n*/\n\ncontext Patient\n\ndefine \"Initial Population\":\n\tAgeInYearsAt(start of \"Measurement Period\") &gt;= 18\n\n/*\nExclusions\n*/\n\ndefine \"Denominator Exclusion\":\n  exists (\n    [Condition: \"Alcohol use disorder\"] AlcoholUse\n      where AlcoholUse.clinicalStatus in { 'active', 'recurrence' }\n        and AlcoholUse.assertedDate during day of Interval[start of \"Measurement Period\" - 1 year, end of \"Measurement Period\"]\n\t)\n    or exists (\n      [Condition: \"Dementia\"] D\n        where D.clinicalStatus in { 'active', 'recurrence' }\n          and D.assertedDate during day of Interval[start of \"Measurement Period\", end of \"Measurement Period\" - 60 days]\n    )\n\n/*\nDenominators and Numerators\n*/\n\n// Unhealthy Alcohol Use Screening\n\ndefine \"Denominator 1\":\n  // \"Initial Population\"\n  true\n\n// Unhealthy Alcohol Use Screening\n\ndefine \"Numerator 1\":\n  // \"Initial Population\"\n  exists ( \"AUDIT-C Assessment\" )\n    or exists ( \"AUDIT Assessment\" )\n    or (\n      \"Patient is Male\"\n        and exists ( \"Five or more drinks per day Assessment\" )\n    )\n    or (\n      \"Patient is Female\"\n        and (\n          exists ( \"Four or more drinks per day Assessment\" )\n            or exists ( \"Five or more drinks per day Assessment\" )\n        )\n    )\n    or (\n      \"Patient is 65 or Over\"\n        and (\n          exists ( \"Four or more drinks per day Assessment\" )\n            or exists ( \"Five or more drinks per day Assessment\" )\n        )\n    )\n   // Note: The spec doesn't include the over 65 test here but does in dependent N/D 2.\n\ndefine \"AUDIT-C Assessment\":\n  [Observation: \"AUDIT-C Total Score (in points)\"] A\n    where A.status in { 'final', 'amended', 'corrected' }\n      and A.effective in day of \"Measurement Period\"\n      and A.value is not null\n\ndefine \"AUDIT Assessment\":\n  [Observation: \"AUDIT Total Score (in points)\"] A\n    where A.status in { 'final', 'amended', 'corrected' }\n      and A.effective in day of \"Measurement Period\"\n      and A.value is not null\n\ndefine \"Patient is Male\":\n  Patient.gender = 'male'\n\ndefine \"Five or more drinks per day Assessment\":\n  [Observation: \"Alcoholic drinks per drinking day - Reported\"] A\n    where A.status in { 'final', 'amended', 'corrected' }\n      and A.effective in day of \"Measurement Period\"\n      and A.value &gt;= 5 '{drinks}/d'\n\ndefine \"Patient is Female\":\n  Patient.gender = 'female'\n\ndefine \"Patient is 65 or Over\":\n  AgeInYearsAt(start of \"Measurement Period\")&gt;= 65\n\ndefine \"Four or more drinks per day Assessment\":\n  [Observation: \"Alcoholic drinks per drinking day - Reported\"] A\n    where A.status in { 'final', 'amended', 'corrected' }\n      and A.effective in day of \"Measurement Period\"\n      and A.value &gt;= 4 '{drinks}/d'\n\n// Counseling or Other Follow-Up on Positive Screen\n\n/*\nInitial Population\nProduct lines -- Commercial, Medicaid, Medicare (report each product line separately).\n*/\n\ndefine \"Denominator 2\":\n  // \"Initial Population\"\n  exists \"Positive Assessment for Unhealthy Alcohol Use\"\n\n// Counseling or Other Follow-Up on Positive Screen\n\ndefine \"Numerator 2\":\n  // \"Initial Population\"\n  exists (\n    \"Initial Positive Assessment for Unhealthy Alcohol Use\" A\n      with \"Followup After Positive Screen\" F\n        such that\n          if F is Observation then F.effective 2 months or less on or after day of A.effective\n          else F.performed.\"end\" 2 months or less on or after day of A.effective\n  )\n\ndefine \"Positive Assessment for Unhealthy Alcohol Use\":\n  (\n    \"AUDIT Assessment\" A\n      where A.value &gt;= 8\n  )\n    union (\n      \"AUDIT-C Assessment\" A\n        where (\"Patient is Male\" and A.value &gt;= 4)\n          or (\"Patient is Female\" and A.value &gt;= 3)\n    )\n    union (\n      \"Five or more drinks per day Assessment\" A\n        where \"Patient is Male\"\n          and A.value &gt;= 1\n    )\n    union (\n      \"Four or more drinks per day Assessment\" A\n        where (\"Patient is Female\" or \"Patient is 65 or Over\")\n          and A.value &gt;= 1\n    )\n\ndefine \"Followup After Positive Screen\":\n  (\n    [Procedure: \"Alcohol Counseling and Treatment\"] Proc\n      where Proc.status = 'completed'\n\t)\n    union (\n      [Observation: \"Alcohol Counseling and Treatment\"] Obs\n        where Obs.status in { 'final', 'amended', 'corrected' }\n    )\n    union (\n      [Procedure: \"Alcohol Screening\"] Proc\n        where Proc.status = 'completed'\n    )\n    union (\n      [Observation: \"Alcohol Screening\"] Obs\n        where Obs.status in { 'final', 'amended', 'corrected' }\n    )\n\ndefine \"Initial Positive Assessment for Unhealthy Alcohol Use\":\n  {\n    First(\n      \"Positive Assessment for Unhealthy Alcohol Use\" A\n        sort by effective.value\n    )\n  }\n\n/*\nStratifiers\n*/\n\ndefine \"Stratifier 1\":\n  AgeInYearsAt(start of \"Measurement Period\")in Interval[18, 44]\n\ndefine \"Stratifier 2\":\n  AgeInYearsAt(start of \"Measurement Period\")in Interval[45, 64]\n\ndefine \"Stratifier 3\":\n  AgeInYearsAt(start of \"Measurement Period\")&gt;= 65\n</code></pre>\n                    \n                    \n                </td>\n            </tr>\n        \n    </table>\n</div>"
	},
	"url": "http://ncqa.org/fhir/hedis/Library/library-asf-logic",
	"identifier": [
		{
			"use": "official",
			"value": "Library_ASF"
		}
	],
	"version": "1.0.0",
	"name": "ASF_FHIR",
	"title": "ASF Logic",
	"status": "active",
	"experimental": true,
	"type": {
		"coding": [
			{
				"system": "http://hl7.org/fhir/library-type",
				"code": "logic-library"
			}
		]
	},
	"date": "2017-05-05",
	"publisher": "National Committee for Quality Assurance",
	"description": "Unhealthy Alcohol Use Screening and Follow-up (ASF) Logic Library",
	"copyright": "The HEDIS measure specifications were developed by and are owned by NCQA. The HEDIS measure specifications are not clinical guidelines and do not establish a standard of medical care. NCQA makes no representations, warranties, or endorsement about the quality of any organization or physician that uses or reports performance measures and NCQA has no liability to anyone who relies on such measure specifications. These materials may not be modified by anyone other than NCQA. Anyone desiring to use or reproduce the materials without modification for a non-commercial purpose may do so without obtaining any approval from NCQA. **Any commercial use (including but not limited to vendors using the measure specifications with a product or service, including calculation of measure results) must be approved by NCQA and are subject to a license at the discretion of NCQA**.  &copy; 2019 NCQA, all rights reserved.",
	"relatedArtifact": [
		{
			"type": "depends-on",
			"resource": {
				"reference": "Library/library-fhir-helpers"
			}
		}
	],
	"dataRequirement": [
		{
			"type": "Condition",
			"codeFilter": [
				{
					"path": "code",
					"valueSetString": "http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1339"
				}
			]
		},
		{
			"type": "Condition",
			"codeFilter": [
				{
					"path": "code",
					"valueSetString": "http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1074"
				}
			]
		},
		{
			"type": "Observation",
			"codeFilter": [
				{
					"path": "code"
				}
			]
		},
		{
			"type": "Observation",
			"codeFilter": [
				{
					"path": "code"
				}
			]
		},
		{
			"type": "Observation",
			"codeFilter": [
				{
					"path": "code"
				}
			]
		},
		{
			"type": "Observation",
			"codeFilter": [
				{
					"path": "code"
				}
			]
		},
		{
			"type": "Procedure",
			"codeFilter": [
				{
					"path": "code",
					"valueSetString": "http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1437"
				}
			]
		},
		{
			"type": "Observation",
			"codeFilter": [
				{
					"path": "code",
					"valueSetString": "http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1437"
				}
			]
		},
		{
			"type": "Procedure",
			"codeFilter": [
				{
					"path": "code",
					"valueSetString": "http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1337"
				}
			]
		},
		{
			"type": "Observation",
			"codeFilter": [
				{
					"path": "code",
					"valueSetString": "http://ncqa.org/hedis/ValueSet/2.16.840.1.113883.3.464.1004.1337"
				}
			]
		}
	],
	"content": [
		{
			"contentType": "text/cql",
			"data": "bGlicmFyeSBBU0ZfRkhJUiB2ZXJzaW9uICcxLjAuMCcKCi8qClVuaGVhbHRoeSBBbGNvaG9sIFVzZSBTY3JlZW5pbmcgYW5kIEZvbGxvdy11cCAoQVNGKQoqLwoKCnVzaW5nIEZISVIgdmVyc2lvbiAnMy4wLjAnCgppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzMuMC4wJyBjYWxsZWQgRkhJUkhlbHBlcnMKCi8qCk1lYXN1cmUgRGVzY3JpcHRpb24KVGhlIHBlcmNlbnRhZ2Ugb2YgbWVtYmVycyAxOCB5ZWFycyBvZiBhZ2UgYW5kIG9sZGVyIHdobyB3ZXJlIHNjcmVlbmVkIGZvcgp1bmhlYWx0aHkgYWxjb2hvbCB1c2UgdXNpbmcgYSBzdGFuZGFyZGl6ZWQgdG9vbCBhbmQsIGlmIHNjcmVlbmVkCnBvc2l0aXZlLCByZWNlaXZlZCBhcHByb3ByaWF0ZSBmb2xsb3ctdXAgY2FyZS4gVHdvIHJhdGVzIGFyZSByZXBvcnRlZC4KMS4gVW5oZWFsdGh5IEFsY29ob2wgVXNlIFNjcmVlbmluZy4gVGhlIHBlcmNlbnRhZ2Ugb2YgbWVtYmVycyB3aG8gaGFkIGEKc3lzdGVtYXRpYyBzY3JlZW5pbmcgZm9yIHVuaGVhbHRoeSBhbGNvaG9sIHVzZS4KMi4gQ291bnNlbGluZyBvciBPdGhlciBGb2xsb3ctdXAuIFRoZSBwZXJjZW50YWdlIG9mIG1lbWJlcnMgd2hvIHNjcmVlbmVkCnBvc2l0aXZlIGZvciB1bmhlYWx0aHkgYWxjb2hvbCB1c2UgYW5kIHJlY2VpdmVkIGJyaWVmIGNvdW5zZWxpbmcgb3IKb3RoZXIgZm9sbG93LXVwIGNhcmUgd2l0aGluIDIgbW9udGhzIG9mIGEgcG9zaXRpdmUgc2NyZWVuaW5nLgoqLwoKCmNvZGVzeXN0ZW0gIkxPSU5DIjogJ2h0dHA6Ly9sb2luYy5vcmcnCmNvZGVzeXN0ZW0gIkNRRnJhbWV3b3JrIjogJ2h0dHA6Ly9jcWZyYW1ld29yay5pbmZvL2NvZGVzeXN0ZW0vcGxhY2Vob2xkZXInCgovLyBVcGRhdGUKCgp2YWx1ZXNldCAiQWxjb2hvbCBDb3Vuc2VsaW5nIGFuZCBUcmVhdG1lbnQiOiAnaHR0cDovL25jcWEub3JnL2hlZGlzL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDQuMTQzNycKdmFsdWVzZXQgIkFsY29ob2wgU2NyZWVuaW5nIjogJ2h0dHA6Ly9uY3FhLm9yZy9oZWRpcy9WYWx1ZVNldC8yLjE2Ljg0MC4xLjExMzg4My4zLjQ2NC4xMDA0LjEzMzcnCnZhbHVlc2V0ICJBbGNvaG9sIHVzZSBkaXNvcmRlciI6ICdodHRwOi8vbmNxYS5vcmcvaGVkaXMvVmFsdWVTZXQvMi4xNi44NDAuMS4xMTM4ODMuMy40NjQuMTAwNC4xMzM5Jwp2YWx1ZXNldCAiRGVtZW50aWEiOiAnaHR0cDovL25jcWEub3JnL2hlZGlzL1ZhbHVlU2V0LzIuMTYuODQwLjEuMTEzODgzLjMuNDY0LjEwMDQuMTA3NCcKCmNvZGUgIkFsY29ob2xpYyBkcmlua3MgcGVyIGRyaW5raW5nIGRheSAtIFJlcG9ydGVkIjogJzExMjg3LTAnIGZyb20gIkxPSU5DIgpjb2RlICJBVURJVCBUb3RhbCBTY29yZSAoaW4gcG9pbnRzKSI6ICc3NTYyNC03JyBmcm9tICJMT0lOQyIKY29kZSAiQVVESVQtQyBUb3RhbCBTY29yZSAoaW4gcG9pbnRzKSI6ICc3NTYyNi0yJyBmcm9tICJMT0lOQyIKCi8qClRoaXMgbGlicmFyeSBoYXMgYW4gZXhwbGljaXQgcGFyYW1ldGVyIHdoaWNoIGlzIHRoZSBwcm9kdWN0IGxpbmUuClJlY29nbml6ZWQgbm9ybWFsIGFyZ3VtZW50cyBhcmUgeydjb21tZXJjaWFsJywgJ21lZGljYWlkJywgJ21lZGljYXJlJ30uCklmIG9uZSBvZiB0aGVzZSBub3JtYWwgYXJndW1lbnRzIGlzIGdpdmVuLCB0aGUgcGF0aWVudCB3aWxsIG9ubHkgYmUKY29uc2lkZXJlZCB0byBiZSBpbiB0aGUgSW5pdGlhbCBQb3B1bGF0aW9uIGlmIHRoZXkgaGF2ZSBhbiBhcHByb3ByaWF0ZQpjb250aW51b3VzIGVucm9sbG1lbnQgaW4gdGhhdCBraW5kIG9mIG1lZGljYWwgcGxhbi4KSWYgaW5zdGVhZCBhIG51bGwgYXJndW1lbnQgaXMgZ2l2ZW4sIHRoZWlyIGVucm9sbG1lbnQgc3RhdHVzIHdpbGwgaGF2ZSBubwplZmZlY3Qgb24gd2hldGhlciB0aGV5IGFyZSBjb25zaWRlcmVkIHRvIGJlIGluIHRoZSBJbml0aWFsIFBvcHVsYXRpb24uCklmIGluc3RlYWQgc29tZSBvdGhlciBhcmd1bWVudCBpcyBnaXZlbiAoYW4gdW5yZWNvZ25pemVkIHBsYW4gdHlwZSksCnRoZSBwYXRpZW50IHdpbGwgdW5jb25kaXRpb25hbGx5IE5PVCBiZSBpbiB0aGUgSW5pdGlhbCBQb3B1bGF0aW9uLgoqLwoKCnBhcmFtZXRlciAiUHJvZHVjdCBMaW5lIiBTdHJpbmcKCi8qClRoaXMgbGlicmFyeSBoYXMgYW4gZXhwbGljaXQgcGFyYW1ldGVyIHdoaWNoIGlzIHRoZSBtZWFzdXJlbWVudCB5ZWFyLgpXaGlsZSB0aGUgYWN0dWFsIHBhcmFtZXRlcidzIHR5cGUgYWNjZXB0cyBhbGwgaW50ZXJ2YWxzLCB0aGlzIGxpYnJhcnkKZXhwZWN0cyBpdCB3aWxsIG9ubHkgYmUgZ2l2ZW4gYXJndW1lbnRzIGNvcnJlc3BvbmRpbmcgZXhhY3RseSB0byBvbmUgd2hvbGUKY2FsZW5kYXIgeWVhciwgYW5kIGl0IHdpbGwgbm90IGJlaGF2ZSBwcm9wZXJseSBvdGhlcndpc2U7IDIwMTcgZm9yIGV4YW1wbGU6CkludGVydmFsW0RhdGVUaW1lKDIwMTcsMSwxLDAsMCwwLDApLCBEYXRlVGltZSgyMDE4LDEsMSwwLDAsMCwwKSkKKi8KCnBhcmFtZXRlciAiTWVhc3VyZW1lbnQgUGVyaW9kIiBJbnRlcnZhbDxEYXRlVGltZT4KCi8qClRoaXMgbGlicmFyeSBldmFsdWF0ZXMgd2l0aCByZXNwZWN0IHRvIGV4YWN0bHkgMSBjYW5kaWRhdGUgcGF0aWVudCBhdCBhIHRpbWUsCnRoYXQgcGF0aWVudCBiZWluZyBnaXZlbiBieSB0aGUgc3BlY2lhbCBjb250ZXh0IHBhcmFtZXRlciBQYXRpZW50LgoqLwoKCmNvbnRleHQgUGF0aWVudAoKZGVmaW5lICJJbml0aWFsIFBvcHVsYXRpb24iOgogIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIikgPj0gMTgKCi8qCkV4Y2x1c2lvbnMKKi8KCmRlZmluZSAiRGVub21pbmF0b3IgRXhjbHVzaW9uIjoKICBleGlzdHMgKCBbQ29uZGl0aW9uOiAiQWxjb2hvbCB1c2UgZGlzb3JkZXIiXSBBbGNvaG9sVXNlCiAgICAgIHdoZXJlIEFsY29ob2xVc2UuY2xpbmljYWxTdGF0dXMgaW4geyAnYWN0aXZlJywgJ3JlY3VycmVuY2UnIH0KICAgICAgICBhbmQgQWxjb2hvbFVzZS5hc3NlcnRlZERhdGUgZHVyaW5nIGRheSBvZiBJbnRlcnZhbFtzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIiAtIDEgeWVhciwgZW5kIG9mICJNZWFzdXJlbWVudCBQZXJpb2QiXQogICkKICAgIG9yIGV4aXN0cyAoIFtDb25kaXRpb246ICJEZW1lbnRpYSJdIEQKICAgICAgICB3aGVyZSBELmNsaW5pY2FsU3RhdHVzIGluIHsgJ2FjdGl2ZScsICdyZWN1cnJlbmNlJyB9CiAgICAgICAgICBhbmQgRC5hc3NlcnRlZERhdGUgZHVyaW5nIGRheSBvZiBJbnRlcnZhbFtzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIiwgZW5kIG9mICJNZWFzdXJlbWVudCBQZXJpb2QiIC0gNjAgZGF5c10KICAgICkKCi8qCkRlbm9taW5hdG9ycyBhbmQgTnVtZXJhdG9ycwoqLwoKLy8gVW5oZWFsdGh5IEFsY29ob2wgVXNlIFNjcmVlbmluZwoKCgpkZWZpbmUgIkRlbm9taW5hdG9yIDEiOgogIC8vICJJbml0aWFsIFBvcHVsYXRpb24iCiAgCiAgdHJ1ZQoKLy8gVW5oZWFsdGh5IEFsY29ob2wgVXNlIFNjcmVlbmluZwoKCmRlZmluZSAiTnVtZXJhdG9yIDEiOgogIC8vICJJbml0aWFsIFBvcHVsYXRpb24iCiAgCiAgZXhpc3RzICggIkFVRElULUMgQXNzZXNzbWVudCIgKQogICAgb3IgZXhpc3RzICggIkFVRElUIEFzc2Vzc21lbnQiICkKICAgIG9yICggIlBhdGllbnQgaXMgTWFsZSIKICAgICAgICBhbmQgZXhpc3RzICggIkZpdmUgb3IgbW9yZSBkcmlua3MgcGVyIGRheSBBc3Nlc3NtZW50IiApCiAgICApCiAgICBvciAoICJQYXRpZW50IGlzIEZlbWFsZSIKICAgICAgICBhbmQgKCBleGlzdHMgKCAiRm91ciBvciBtb3JlIGRyaW5rcyBwZXIgZGF5IEFzc2Vzc21lbnQiICkKICAgICAgICAgICAgb3IgZXhpc3RzICggIkZpdmUgb3IgbW9yZSBkcmlua3MgcGVyIGRheSBBc3Nlc3NtZW50IiApCiAgICAgICAgKQogICAgKQogICAgb3IgKCAiUGF0aWVudCBpcyA2NSBvciBPdmVyIgogICAgICAgIGFuZCAoIGV4aXN0cyAoICJGb3VyIG9yIG1vcmUgZHJpbmtzIHBlciBkYXkgQXNzZXNzbWVudCIgKQogICAgICAgICAgICBvciBleGlzdHMgKCAiRml2ZSBvciBtb3JlIGRyaW5rcyBwZXIgZGF5IEFzc2Vzc21lbnQiICkKICAgICAgICApCiAgICApCiAgIC8vIE5vdGU6IFRoZSBzcGVjIGRvZXNuJ3QgaW5jbHVkZSB0aGUgb3ZlciA2NSB0ZXN0IGhlcmUgYnV0IGRvZXMgaW4gZGVwZW5kZW50IE4vRCAyLgoKCmRlZmluZSAiQVVESVQtQyBBc3Nlc3NtZW50IjoKICBbT2JzZXJ2YXRpb246ICJBVURJVC1DIFRvdGFsIFNjb3JlIChpbiBwb2ludHMpIl0gQQogICAgd2hlcmUgQS5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0KICAgICAgYW5kIEEuZWZmZWN0aXZlIGluIGRheSBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIgogICAgICBhbmQgQS52YWx1ZSBpcyBub3QgbnVsbAoKZGVmaW5lICJBVURJVCBBc3Nlc3NtZW50IjoKICBbT2JzZXJ2YXRpb246ICJBVURJVCBUb3RhbCBTY29yZSAoaW4gcG9pbnRzKSJdIEEKICAgIHdoZXJlIEEuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9CiAgICAgIGFuZCBBLmVmZmVjdGl2ZSBpbiBkYXkgb2YgIk1lYXN1cmVtZW50IFBlcmlvZCIKICAgICAgYW5kIEEudmFsdWUgaXMgbm90IG51bGwKCmRlZmluZSAiUGF0aWVudCBpcyBNYWxlIjoKICBQYXRpZW50LmdlbmRlciA9ICdtYWxlJwoKZGVmaW5lICJGaXZlIG9yIG1vcmUgZHJpbmtzIHBlciBkYXkgQXNzZXNzbWVudCI6CiAgW09ic2VydmF0aW9uOiAiQWxjb2hvbGljIGRyaW5rcyBwZXIgZHJpbmtpbmcgZGF5IC0gUmVwb3J0ZWQiXSBBCiAgICB3aGVyZSBBLnN0YXR1cyBpbiB7ICdmaW5hbCcsICdhbWVuZGVkJywgJ2NvcnJlY3RlZCcgfQogICAgICBhbmQgQS5lZmZlY3RpdmUgaW4gZGF5IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiCiAgICAgIGFuZCBBLnZhbHVlID49IDUgJ3tkcmlua3N9L2QnCgpkZWZpbmUgIlBhdGllbnQgaXMgRmVtYWxlIjoKICBQYXRpZW50LmdlbmRlciA9ICdmZW1hbGUnCgpkZWZpbmUgIlBhdGllbnQgaXMgNjUgb3IgT3ZlciI6CiAgQWdlSW5ZZWFyc0F0KHN0YXJ0IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiKSA+PSA2NQoKZGVmaW5lICJGb3VyIG9yIG1vcmUgZHJpbmtzIHBlciBkYXkgQXNzZXNzbWVudCI6CiAgW09ic2VydmF0aW9uOiAiQWxjb2hvbGljIGRyaW5rcyBwZXIgZHJpbmtpbmcgZGF5IC0gUmVwb3J0ZWQiXSBBCiAgICB3aGVyZSBBLnN0YXR1cyBpbiB7ICdmaW5hbCcsICdhbWVuZGVkJywgJ2NvcnJlY3RlZCcgfQogICAgICBhbmQgQS5lZmZlY3RpdmUgaW4gZGF5IG9mICJNZWFzdXJlbWVudCBQZXJpb2QiCiAgICAgIGFuZCBBLnZhbHVlID49IDQgJ3tkcmlua3N9L2QnCgovLyBDb3Vuc2VsaW5nIG9yIE90aGVyIEZvbGxvdy1VcCBvbiBQb3NpdGl2ZSBTY3JlZW4KCi8qCkluaXRpYWwgUG9wdWxhdGlvbgpQcm9kdWN0IGxpbmVzIC0tIENvbW1lcmNpYWwsIE1lZGljYWlkLCBNZWRpY2FyZSAocmVwb3J0IGVhY2ggcHJvZHVjdCBsaW5lIHNlcGFyYXRlbHkpLgoqLwoKCgpkZWZpbmUgIkRlbm9taW5hdG9yIDIiOgogIC8vICJJbml0aWFsIFBvcHVsYXRpb24iCiAgCiAgZXhpc3RzICJQb3NpdGl2ZSBBc3Nlc3NtZW50IGZvciBVbmhlYWx0aHkgQWxjb2hvbCBVc2UiCgovLyBDb3Vuc2VsaW5nIG9yIE90aGVyIEZvbGxvdy1VcCBvbiBQb3NpdGl2ZSBTY3JlZW4KCgpkZWZpbmUgIk51bWVyYXRvciAyIjoKICAvLyAiSW5pdGlhbCBQb3B1bGF0aW9uIgogIAogIGV4aXN0cyAoICJJbml0aWFsIFBvc2l0aXZlIEFzc2Vzc21lbnQgZm9yIFVuaGVhbHRoeSBBbGNvaG9sIFVzZSIgQQogICAgICB3aXRoICJGb2xsb3d1cCBBZnRlciBQb3NpdGl2ZSBTY3JlZW4iIEYKICAgICAgICBzdWNoIHRoYXQgaWYgRiBpcyBPYnNlcnZhdGlvbiB0aGVuIFRvSW50ZXJ2YWwoRi5lZmZlY3RpdmUpIDIgbW9udGhzIG9yIGxlc3Mgb24gb3IgYWZ0ZXIgZGF5IG9mIEEuZWZmZWN0aXZlIAogICAgICAgICAgZWxzZSBGLnBlcmZvcm1lZC4iZW5kIiAyIG1vbnRocyBvciBsZXNzIG9uIG9yIGFmdGVyIGRheSBvZiBBLmVmZmVjdGl2ZQogICkKCmRlZmluZSAiUG9zaXRpdmUgQXNzZXNzbWVudCBmb3IgVW5oZWFsdGh5IEFsY29ob2wgVXNlIjoKICAoICJBVURJVCBBc3Nlc3NtZW50IiBBCiAgICAgIHdoZXJlIEEudmFsdWUgPj0gOAogICkKICAgIHVuaW9uICggIkFVRElULUMgQXNzZXNzbWVudCIgQQogICAgICAgIHdoZXJlICggIlBhdGllbnQgaXMgTWFsZSIKICAgICAgICAgICAgYW5kIEEudmFsdWUgPj0gNAogICAgICAgICkKICAgICAgICAgIG9yICggIlBhdGllbnQgaXMgRmVtYWxlIgogICAgICAgICAgICAgIGFuZCBBLnZhbHVlID49IDMKICAgICAgICAgICkKICAgICkKICAgIHVuaW9uICggIkZpdmUgb3IgbW9yZSBkcmlua3MgcGVyIGRheSBBc3Nlc3NtZW50IiBBCiAgICAgICAgd2hlcmUgIlBhdGllbnQgaXMgTWFsZSIKICAgICAgICAgIGFuZCBBLnZhbHVlID49IDEKICAgICkKICAgIHVuaW9uICggIkZvdXIgb3IgbW9yZSBkcmlua3MgcGVyIGRheSBBc3Nlc3NtZW50IiBBCiAgICAgICAgd2hlcmUgKCAiUGF0aWVudCBpcyBGZW1hbGUiCiAgICAgICAgICAgIG9yICJQYXRpZW50IGlzIDY1IG9yIE92ZXIiCiAgICAgICAgKQogICAgICAgICAgYW5kIEEudmFsdWUgPj0gMQogICAgKQoKZGVmaW5lICJGb2xsb3d1cCBBZnRlciBQb3NpdGl2ZSBTY3JlZW4iOgogICggW1Byb2NlZHVyZTogIkFsY29ob2wgQ291bnNlbGluZyBhbmQgVHJlYXRtZW50Il0gUHJvYwogICAgICB3aGVyZSBQcm9jLnN0YXR1cyA9ICdjb21wbGV0ZWQnCiAgKQogICAgdW5pb24gKCBbT2JzZXJ2YXRpb246ICJBbGNvaG9sIENvdW5zZWxpbmcgYW5kIFRyZWF0bWVudCJdIE9icwogICAgICAgIHdoZXJlIE9icy5zdGF0dXMgaW4geyAnZmluYWwnLCAnYW1lbmRlZCcsICdjb3JyZWN0ZWQnIH0KICAgICkKICAgIHVuaW9uICggW1Byb2NlZHVyZTogIkFsY29ob2wgU2NyZWVuaW5nIl0gUHJvYwogICAgICAgIHdoZXJlIFByb2Muc3RhdHVzID0gJ2NvbXBsZXRlZCcKICAgICkKICAgIHVuaW9uICggW09ic2VydmF0aW9uOiAiQWxjb2hvbCBTY3JlZW5pbmciXSBPYnMKICAgICAgICB3aGVyZSBPYnMuc3RhdHVzIGluIHsgJ2ZpbmFsJywgJ2FtZW5kZWQnLCAnY29ycmVjdGVkJyB9CiAgICApCgpkZWZpbmUgIkluaXRpYWwgUG9zaXRpdmUgQXNzZXNzbWVudCBmb3IgVW5oZWFsdGh5IEFsY29ob2wgVXNlIjoKICB7IEZpcnN0KCJQb3NpdGl2ZSBBc3Nlc3NtZW50IGZvciBVbmhlYWx0aHkgQWxjb2hvbCBVc2UiIEEKICAgICAgc29ydCBieSBlZmZlY3RpdmUudmFsdWUKICApIH0KCi8qClN0cmF0aWZpZXJzCiovCgoKZGVmaW5lICJTdHJhdGlmaWVyIDEiOgogIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIikgaW4gSW50ZXJ2YWxbMTgsIDQ0XQoKZGVmaW5lICJTdHJhdGlmaWVyIDIiOgogIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIikgaW4gSW50ZXJ2YWxbNDUsIDY0XQoKZGVmaW5lICJTdHJhdGlmaWVyIDMiOgogIEFnZUluWWVhcnNBdChzdGFydCBvZiAiTWVhc3VyZW1lbnQgUGVyaW9kIikgPj0gNjUKCi8qCkZoaXIgY29tbW9uIEhlbHBlciBmdW5jdGlvbgoqLwoKCmRlZmluZSBmdW5jdGlvbiBUb0ludGVydmFsKGNob2ljZSBDaG9pY2U8RkhJUi5kYXRlVGltZSwgRkhJUi5QZXJpb2QsIEZISVIuVGltaW5nLCBGSElSLmluc3RhbnQsIEZISVIuc3RyaW5nLCBGSElSLkFnZSwgRkhJUi5SYW5nZT4pOgogIGNhc2UKICAgIHdoZW4gY2hvaWNlIGlzIEZISVIuZGF0ZVRpbWUgdGhlbiBJbnRlcnZhbFtGSElSSGVscGVycy5Ub0RhdGVUaW1lICggY2hvaWNlIGFzIEZISVIuZGF0ZVRpbWUgKSwgRkhJUkhlbHBlcnMuVG9EYXRlVGltZSAoIGNob2ljZSBhcyBGSElSLmRhdGVUaW1lICldCiAgICB3aGVuIGNob2ljZSBpcyBGSElSLlBlcmlvZCB0aGVuIEZISVJIZWxwZXJzLlRvSW50ZXJ2YWwgKCBjaG9pY2UgYXMgRkhJUi5QZXJpb2QgKQogICAgd2hlbiBjaG9pY2UgaXMgRkhJUi5pbnN0YW50IHRoZW4gSW50ZXJ2YWxbRkhJUkhlbHBlcnMuVG9EYXRlVGltZSAoIGNob2ljZSBhcyBGSElSLmluc3RhbnQgKSwgRkhJUkhlbHBlcnMuVG9EYXRlVGltZSAoIGNob2ljZSBhcyBGSElSLmluc3RhbnQgKV0KICAgIHdoZW4gY2hvaWNlIGlzIEZISVIuQWdlIHRoZW4gSW50ZXJ2YWxbRkhJUkhlbHBlcnMuVG9EYXRlICggUGF0aWVudC5iaXJ0aERhdGUgKSArIEZISVJIZWxwZXJzLlRvUXVhbnRpdHkgKCBjaG9pY2UgYXMgRkhJUi5BZ2UgKSwgRkhJUkhlbHBlcnMuVG9EYXRlICggUGF0aWVudC5iaXJ0aERhdGUgKSArIEZISVJIZWxwZXJzLlRvUXVhbnRpdHkgKCBjaG9pY2UgYXMgRkhJUi5BZ2UgKSArIDEgeWVhciApCiAgICB3aGVuIGNob2ljZSBpcyBGSElSLlJhbmdlIHRoZW4gSW50ZXJ2YWxbRkhJUkhlbHBlcnMuVG9EYXRlICggUGF0aWVudC5iaXJ0aERhdGUgKSArIEZISVJIZWxwZXJzLlRvUXVhbnRpdHkgKCAoIGNob2ljZSBhcyBGSElSLlJhbmdlICkubG93ICksIEZISVJIZWxwZXJzLlRvRGF0ZSAoIFBhdGllbnQuYmlydGhEYXRlICkgKyBGSElSSGVscGVycy5Ub1F1YW50aXR5ICggKCBjaG9pY2UgYXMgRkhJUi5SYW5nZSApLmhpZ2ggKSArIDEgeWVhciApCiAgICB3aGVuIGNob2ljZSBpcyBGSElSLlRpbWluZyB0aGVuIE1lc3NhZ2UobnVsbCBhcyBJbnRlcnZhbDxEYXRlVGltZT4sIHRydWUsICcxJywgJ0Vycm9yJywgJ0Nhbm5vdCBjb21wdXRlIGEgc2luZ2xlIGludGVydmFsIGZyb20gYSBUaW1pbmcgdHlwZScpCiAgICB3aGVuIGNob2ljZSBpcyBGSElSLnN0cmluZyB0aGVuIE1lc3NhZ2UobnVsbCBhcyBJbnRlcnZhbDxEYXRlVGltZT4sIHRydWUsICcxJywgJ0Vycm9yJywgJ0Nhbm5vdCBjb21wdXRlIGFuIGludGVydmFsIGZyb20gYSBTdHJpbmcgdmFsdWUnKSAKICAgIGVsc2UgbnVsbCBhcyBJbnRlcnZhbDxEYXRlVGltZT5lbmQ="
		}
	]
}
